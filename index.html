<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Parse JavaScript Todo App</title>

    <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script src="js/underscore.js"></script>
    <script src="http://www.parsecdn.com/js/parse-1.2.13.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
  </head>

  <body>


  <script>
      var choise_t = "";
      var choise = [];
      Parse.$ = jQuery;
     Parse.initialize("U45tHUunPOBlrrwiJQNWmCQBe9PtYWja9Wa6Ndfc", "AG4gZ1O3gMDUJ1rRgmsYeHU1ylvnVTdmtcD7uu4n");

    var innerhtml = '';

    function findaccount(choise)
    {
          innerhtml = '';
          $('#test').html("");
          var usd = Parse.Object.extend("SB_111111");
          var query = new Parse.Query(usd);
          query.descending("createdAt");
          query.limit(10000);
          query.containsAll("GachaSeq",choise);



          query.find({
              success: function (list) {
                  for (var i = 0; i < list.length; i++) {
                      var obj = list[i];
                      var GachaSeq = obj.get('GachaSeq');
                      var gacha1 =  obj.get('gacha1').toString().substring(obj.get('gacha1').toString().indexOf(',')+1);
                      var gacha2 = obj.get('gacha2').toString().substring(obj.get('gacha2').toString().indexOf(',')+1);
                     var gacha3 = null//obj.get('gacha3').toString().substring(obj.get('gacha3').toString().indexOf(',')+1);
                     var gacha4 = null//obj.get('gacha4').toString().substring(obj.get('gacha4').toString().indexOf(',')+1);
                      var MDCode = obj.get('MDCode');

                    //  var total = parseInt(gacha1.substring(0,1))+parseInt(gacha2.substring(0,1))+parseInt(gacha3.substring(0,1))+parseInt(gacha4.substring(0,1))





                                  innerhtml +=

                                  "<div class='col-md-3' ><div class='panel panel-success'> <div class='panel-heading'>"

                                    if(gacha1 != null){
                                    innerhtml += "<a target='_blank' href='http://sb.yeeapps.com/02/monster_detial.php?monsters_id=" + GachaSeq[0] + "'><img alt='"
                                    + gacha1 + "' title='" + gacha1 + "' src='http://yeeapps.com/images/sbmonster/image"+GachaSeq[0]+".jpg'></a>";

                                    }
                                    if(gacha2 != null){
                                    innerhtml += "<a target='_blank' href='http://sb.yeeapps.com/02/monster_detial.php?monsters_id=" + GachaSeq[1] +"'><img alt='"
                                    + gacha2 + "' title='" + gacha2 + "' src='http://yeeapps.com/images/sbmonster/image"+GachaSeq[1]+".jpg'></a>";
                                   }

                                   if(gacha3 != null){
                                     innerhtml += "<a target='_blank' href='http://sb.yeeapps.com/02/monster_detial.php?monsters_id=" + GachaSeq[2] + "'><img alt='"
                                     + gacha3 + "' title='" + gacha3 + "' src='http://yeeapps.com/images/sbmonster/image"+GachaSeq[2]+".jpg'></a>";
                                  }
                                  if(gacha4 != null){
                                    innerhtml += "<a target='_blank' href='http://sb.yeeapps.com/02/monster_detial.php?monsters_id=" + GachaSeq[3] + "'><img alt='"
                                    + gacha4 + "' title='" + gacha4 + "' src='http://yeeapps.com/images/sbmonster/image"+GachaSeq[3]+".jpg'></a>";
                                 }


                                    innerhtml += "</br>";

                                    if(gacha1 != null){
                                  innerhtml += gacha1;
                                }

                                  if(gacha2 != null){
                                  innerhtml += gacha2;
                                }

                                if(gacha3 != null){
                                  innerhtml += gacha3;
                                }

                                if(gacha4 != null){
                                  innerhtml += gacha4;
                                }

                                  innerhtml += "<div class='text-right'>主帳號:"+MDCode+"</div></div> </div></div></div>";





                  }
                  console.log(innerhtml)
                  $('#test').html(innerhtml);

              }
          });

}
function containsAll(needles, haystack){
  for(var i = 0 , len = needles.length; i < len; i++){
     if($.inArray(needles[i], haystack) == -1) return false;
  }
  return true;
}



      </script>
    <span class="label label-default">首三抽帳號</span><span class="label label-danger">召喚圖板</span>
    <input id="1" class="col-lg-3 form-control" type="text" name="1" value="758" placeholder="棋寵編號1">
    <input id="2" class="col-lg-3 form-control" type="text" name="2" value="862" placeholder="棋寵編號2">
    <input id="3" style="display:none" class="col-lg-3 form-control" type="text" name="3" value="" placeholder="棋寵編號3">

      <div id="choise"></div>
        <button class="btn btn-primary" onclick="choise = [];if(document.getElementById('1').value != ''){choise.push(document.getElementById('1').value)};if(document.getElementById('2').value != ''){choise.push(document.getElementById('2').value)};if(document.getElementById('3').value != ''){choise.push(document.getElementById('3').value)};findaccount(choise)">查詢</button>
        <button class="btn btn-primary" onclick="document.getElementById('1').value = '';document.getElementById('2').value = '';document.getElementById('3').value = ''">清空</button>
   <div id="test"></div>

  </body>

</html>
